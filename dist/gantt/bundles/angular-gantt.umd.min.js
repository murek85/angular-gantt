!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@material-extended/mde"),require("@angular/material/card"),require("@angular/forms")):"function"==typeof define&&define.amd?define("angular-gantt",["exports","@angular/core","@angular/common","@material-extended/mde","@angular/material/card","@angular/forms"],t):t((e=e||self)["angular-gantt"]={},e.ng.core,e.ng.common,e.mde,e.ng.material.card,e.ng.forms)}(this,(function(e,t,n,i,o,r){"use strict";var a=function(){function e(){this.cellWidth=38,this.rowHeight=30,this.activityHeight=420,this.barHeight=25,this.barLineHeight=35,this.barMoveable=!1}return e.ɵfac=function(t){return new(t||e)},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}(),l=function(){function e(){this.rowHeight=0,this.hourCellWidth=60,this.hoursCellWidth=25*this.hourCellWidth,this.cellWidth=0,this.windowInnerWidth=0,this.activityHeight=0,this.barHeight=0,this.barLineHeight=0,this.barTop=0,this.barMoveable=!1,this.gridWidth=0,this.gridHeight=332;var e=new a;this.rowHeight=e.rowHeight,this.cellWidth=e.cellWidth,this.activityHeight=e.activityHeight,this.barHeight=e.barHeight,this.barLineHeight=e.barLineHeight,this.barTop=e.rowHeight,this.barMoveable=e.barMoveable}return e.prototype.calculateBarWidth=function(e,t){"string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t));var n=this.calculateDiffDays(e,t);return(n*this.cellWidth+n)/7},e.prototype.calculateBarLeft=function(e,t){var n=0;if(null!=e){"string"==typeof e&&(e=new Date);for(var i=0;i<t.length;i++)if(e.getTime()>=t[i].getTime()&&e.getTime()<t[i+1].getTime()){n=i*this.cellWidth+this.cellWidth*this.calculateDiffDays(t[i],e)/7+i+this.calculateBarLeftDelta(e);break}}return n},e.prototype.calculateGanttHeight=function(){return this.TASK_CACHE.length*this.rowHeight+"px"},e.prototype.calculateBarLeftDelta=function(e){var t=e.getHours()+e.getMinutes()/60+e.getSeconds()/3600;return this.cellWidth/24*t},e.prototype.calculateBar=function(e,t,n){var i=this.getBarStyle(e.color);return{top:this.barTop*t+2+"px",left:this.calculateBarLeft(e.start,n)+"px",height:this.barHeight+"px","line-height":this.barLineHeight+"px",width:this.calculateBarWidth(e.start,e.end)+"px","background-color":i["background-color"],"border-left":i["border-left"]}},e.prototype.getBarStyle=function(e){var t={};return t["background-color"]=e.secondary,t["border-left"]="5px solid "+e.primary,t},e.prototype.calculateDiffDays=function(e,t){try{return Math.abs((e.getTime()-t.getTime())/864e5)}catch(e){return 0}},e.prototype.calculateScale=function(e,t){void 0===e&&(e=new Date),void 0===t&&(t=this.addDays(e,7));var n=[];try{for(;e.getTime()<=t.getTime();)n.push(e),e=this.addDays(e,7);return n}catch(e){return n}},e.prototype.calculateMonthScale=function(e,t){void 0===e&&(e=new Date),void 0===t&&(t=this.addDays(e,7));var n=[];try{return n=this.calculateCellMonthWidth(e,t)}catch(e){return n}},e.prototype.isDayWeekend=function(e){var t=e.getDay();return 6===t||0===t},e.prototype.addDays=function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n},e.prototype.removeDays=function(e,t){var n=new Date(e);return n.setDate(n.getDate()-t),n},e.prototype.calculateGridScale=function(e){var t=e.map((function(e){return{start:new Date(e.start),end:new Date(e.end)}}));return{start:new Date(Math.min.apply(null,t.map((function(e){return e.start})))),end:new Date(Math.max.apply(null,t.map((function(e){return e.end}))))}},e.prototype.getComputedStyle=function(e,t){return parseInt(document.defaultView.getComputedStyle(e)[t],10)},e.prototype.calculateContainerWidth=function(){return this.windowInnerWidth=window.innerWidth,this.gridWidth-18},e.prototype.calculateContainerHeight=function(){return innerHeight-18},e.prototype.calculateActivityContainerDimensions=function(){this.windowInnerWidth=window.innerWidth;var e=window.innerWidth-this.gridWidth-18;return{height:this.activityHeight,width:e}},e.prototype.calculateGanttActivityWidth=function(e){return"calc(100% - "+(e.offsetWidth+1)+"px)"},e.prototype.calculateGanttActivityHeight=function(e){return e.offsetHeight+"px"},e.prototype.calculateCellMonthWidth=function(e,t){var n,i=[],o=e,r=t,a=this.calculateDiffMonths(o,r),l=this.calculateDiffDays(o,r);for(n=0;n<a;n++){var c=0===n?o:new Date(o.getFullYear(),n,1),s=n===a-1?r:new Date(o.getFullYear(),n+1,0),d=this.calculateDiffDays(c,s)+(n!==a-1&&1),p=1.025*Math.floor(d/l*2e3);i.push({start:c,end:s,width:p})}return i},e.prototype.calculateDiffMonths=function(e,t){var n=t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear());if(t.getDate()<e.getDate()){var i=new Date(t.getFullYear(),t.getMonth(),e.getDate());t<i&&t.getMonth()==i.getMonth()&&t.getYear()%4!=0&&n--}return n+1},e.prototype.scrollTop=function(e,t,n){var i=e.scrollTop,o=this.setScrollTop;null!=i&&(o(i,n),o(n.scrollTop,t))},e.prototype.groupData=function(e){return e},e.prototype.doTaskCheck=function(e,t){return this.TASK_CACHE=e,this.TIME_SCALE=this.calculateScale(t.start,t.end),this.MONTH_SCALE=this.calculateMonthScale(t.start,t.end),!0},e.prototype.setIdPrefix=function(e){return"_"+e},e.prototype.setScrollTop=function(e,t){null!=t&&(t.scrollTop=e)},e.ɵfac=function(t){return new(t||e)},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();function c(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵtext(1),t.ɵɵpipe(2,"date"),t.ɵɵelementEnd()),2&e){var i=n.$implicit,o=n.index,r=t.ɵɵnextContext();t.ɵɵproperty("ngClass",o%2?"weekend":"")("ngStyle",r.setTimescaleWeekendCellStyle()),t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind2(2,3,i,"dd-MM"))}}function s(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var i=n.index,o=t.ɵɵnextContext();t.ɵɵproperty("ngClass",i%2?"weekend":"")("ngStyle",o.setTimescaleWeekendCellStyle()),t.ɵɵadvance(1),t.ɵɵtextInterpolate(i+1)}}var d=function(){function e(e){this.ganttService=e}return e.prototype.ngOnInit=function(){},e.prototype.setTimescaleStyle=function(){return{width:this.dimensions.width+36+"px"}},e.prototype.setTimescaleMonthLineStyle=function(e){return{height:this.ganttService.rowHeight+"px","line-height":this.ganttService.rowHeight+"px",position:"relative","border-top":e}},e.prototype.setTimescaleMonthCellStyle=function(){return{width:this.ganttService.cellWidth+"px"}},e.prototype.setTimescaleWeekendLineStyle=function(e){return{height:this.ganttService.rowHeight+"px","line-height":this.ganttService.rowHeight+"px",position:"relative","border-top":e}},e.prototype.setTimescaleWeekendCellStyle=function(){return{width:this.ganttService.cellWidth+"px"}},e.prototype.isDayWeekend=function(e){return this.ganttService.isDayWeekend(e)},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(l))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["time-scale"]],inputs:{timeScaleMonth:"timeScaleMonth",timeScaleWeekend:"timeScaleWeekend",dimensions:"dimensions",scale:"scale"},features:[t.ɵɵProvidersFeature([l])],decls:5,vars:5,consts:[[1,"time-scale",3,"ngStyle"],[1,"time-scale-line",3,"ngStyle"],["class","time-scale-cell",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"time-scale-cell",3,"ngClass","ngStyle"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵtemplate(2,c,3,6,"div",2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",1),t.ɵɵtemplate(4,s,2,3,"div",2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("ngStyle",n.setTimescaleStyle()),t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",n.setTimescaleWeekendLineStyle("none")),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.timeScaleWeekend),t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",n.setTimescaleWeekendLineStyle("none")),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.timeScaleWeekend))},directives:[n.NgStyle,n.NgForOf,n.NgClass],pipes:[n.DatePipe],styles:[".weekend[_ngcontent-%COMP%] {\n            background-color: whitesmoke;\n        }\n        .time-scale[_ngcontent-%COMP%] {\n            font-size: 12px;\n            background-color: #fff;\n            border-bottom: 1px solid #cecece;\n        }\n        .time-scale-line[_ngcontent-%COMP%] {\n            box-sizing: border-box;\n            border-bottom: 1px solid #cecece;\n        }\n        .time-scale-line[_ngcontent-%COMP%]:first-child {\n            border-top: none;\n        }\n        .time-scale-cell[_ngcontent-%COMP%] {\n            display: inline-block;\n            white-space: nowrap;\n            overflow: hidden;\n            border-right: 1px solid #cecece;\n            text-align: center;\n            height: 100%;\n        }"]}),e}(),p=["bg"];function g(e,n){if(1&e&&t.ɵɵelement(0,"div",5),2&e){var i=n.index,o=t.ɵɵnextContext(2);t.ɵɵproperty("ngStyle",o.setCellStyle())("ngClass",i%2?"weekend":"")}}function u(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵtemplate(1,g,1,2,"div",4),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("ngStyle",i.setRowStyle()),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.cells)}}var h=function(){function e(e){this.ganttService=e,this.rows=[],this.cells=[]}return e.prototype.ngOnInit=function(){this.drawGrid()},e.prototype.isDayWeekend=function(e){return this.ganttService.isDayWeekend(e)},e.prototype.setRowStyle=function(){return{height:this.ganttService.rowHeight+"px"}},e.prototype.setCellStyle=function(){return{width:this.ganttService.cellWidth+"px"}},e.prototype.drawGrid=function(){this.cells=this.timeScale},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(l))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["activity-background"]],viewQuery:function(e,n){var i;(1&e&&t.ɵɵviewQuery(p,!0),2&e)&&(t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.bg=i.first))},inputs:{tasks:"tasks",timeScale:"timeScale"},decls:3,vars:1,consts:[[1,"gantt-activity-bg"],["bg",""],["class","gantt-activity-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gantt-activity-row",3,"ngStyle"],["class","gantt-activity-cell",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],[1,"gantt-activity-cell",3,"ngStyle","ngClass"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0,1),t.ɵɵtemplate(2,u,2,2,"div",2),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.tasks))},directives:[n.NgForOf,n.NgStyle,n.NgClass],styles:[".weekend[_ngcontent-%COMP%] {\n            background-color: whitesmoke;\n        }\n        .gantt-activity-bg[_ngcontent-%COMP%] {\n            overflow: hidden;\n        }\n        .gantt-activity-row[_ngcontent-%COMP%] {\n            border-bottom: 1px solid #ebebeb;\n            background-color: #fff;\n            box-sizing: border-box;\n        }\n        .gantt-activity-cell[_ngcontent-%COMP%] {\n            display: inline-block;\n            height: 100%;\n            border-right: 1px solid #ebebeb;\n        }"]}),e}();function m(e,n){1&e&&t.ɵɵelementContainer(0)}var v=function(e){return{task:e}};function f(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",3,4),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(i);var e=n.$implicit;return t.ɵɵnextContext().gridRowClicked(e)})),t.ɵɵelementStart(2,"div",5,6),t.ɵɵlistener("opened",(function(){t.ɵɵrestoreView(i);var e=n.$implicit;return t.ɵɵnextContext().popoverOpened(e)})),t.ɵɵelementStart(4,"mde-popover",7,8),t.ɵɵtemplate(6,m,1,0,"ng-container",9),t.ɵɵelementEnd(),t.ɵɵelement(7,"div",10),t.ɵɵelementStart(8,"div",11),t.ɵɵelement(9,"div",12),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"div",13),t.ɵɵelement(11,"div",12),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var o=n.$implicit,r=n.index,a=t.ɵɵreference(5),l=t.ɵɵnextContext(),c=t.ɵɵreference(3);t.ɵɵproperty("ngStyle",l.drawBar(o,r)),t.ɵɵadvance(2),t.ɵɵproperty("mdePopoverTriggerFor",a)("mdePopoverBackdropCloseOnClick",!1),t.ɵɵadvance(2),t.ɵɵproperty("mdePopoverEnterDelay",100)("mdePopoverLeaveDelay",0)("mdePopoverPositionY","above")("mdePopoverOverlapTrigger",!1)("mdePopoverDisableAnimation",!1)("mdeFocusTrapEnabled",!1)("mdePopoverArrowWidth",12)("mdePopoverArrowColor",null==o.color?null:o.color.primary),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",c)("ngTemplateOutletContext",t.ɵɵpureFunction1(13,v,o))}}function y(e,n){if(1&e&&(t.ɵɵelementStart(0,"footer"),t.ɵɵelement(1,"span",20),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext(2).task;t.ɵɵadvance(1),t.ɵɵproperty("innerHTML",i.description,t.ɵɵsanitizeHtml)}}var S=function(e){return{borderBottomColor:e,borderBottomWidth:".25em",borderBottomStyle:"solid"}},w=function(e){return{borderColor:e}};function C(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-card",15),t.ɵɵelementStart(1,"mat-card-header"),t.ɵɵelement(2,"div",16),t.ɵɵelementStart(3,"mat-card-title"),t.ɵɵelementStart(4,"span",17),t.ɵɵtext(5),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"mat-card-subtitle"),t.ɵɵelementStart(7,"span"),t.ɵɵtext(8),t.ɵɵpipe(9,"date"),t.ɵɵpipe(10,"date"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-card-subtitle"),t.ɵɵelementStart(12,"span",18),t.ɵɵtext(13,"̶"),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"span"),t.ɵɵtext(15),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"mat-card-content"),t.ɵɵtemplate(17,y,2,1,"footer",19),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var i=t.ɵɵnextContext().task;t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(13,S,null==i.color?null:i.color.primary)),t.ɵɵadvance(2),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(15,w,null==i.color?null:i.color.primary)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(i.name),t.ɵɵadvance(3),t.ɵɵtextInterpolate2("",t.ɵɵpipeBind2(9,7,i.start,"yyyy-MM-dd")," - ",t.ɵɵpipeBind2(10,10,i.end,"yyyy-MM-dd"),""),t.ɵɵadvance(7),t.ɵɵtextInterpolate(i.resource),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",i.description)}}function x(e,n){if(1&e&&t.ɵɵtemplate(0,C,18,17,"mat-card",14),2&e){var i=n.task;t.ɵɵproperty("ngIf",i)}}var b=function(e,t){return{height:e,width:t}},k=function(){function e(e){this.ganttService=e,this.onGridRowClick=new t.EventEmitter,this.onPopoverOpen=new t.EventEmitter,this.containerHeight=0,this.containerWidth=0}return e.prototype.ngOnInit=function(){this.containerHeight=this.dimensions.height,this.containerWidth=this.dimensions.width},e.prototype.drawBar=function(e,t){return this.ganttService.calculateBar(e,t,this.timeScale)},e.prototype.gridRowClicked=function(e){try{this.onGridRowClick.emit(e)}catch(e){}},e.prototype.popoverOpened=function(e){try{this.onPopoverOpen.emit(e)}catch(e){}},e.prototype.addMouseEventListeners=function(e){function t(){document.documentElement.removeEventListener("mousemove",e,!1),document.documentElement.removeEventListener("mouseup",t,!1),document.documentElement.removeEventListener("mouseleave",t,!1)}document.documentElement.addEventListener("mousemove",e,!1),document.documentElement.addEventListener("mouseup",t,!1),document.documentElement.addEventListener("mouseleave",t,!1)},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(l))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["activity-bars"]],inputs:{timeScale:"timeScale",dimensions:"dimensions",tasks:"tasks"},outputs:{onGridRowClick:"onGridRowClick",onPopoverOpen:"onPopoverOpen"},features:[t.ɵɵProvidersFeature([l])],decls:4,vars:5,consts:[[1,"gantt-activity-bars-area",3,"ngStyle"],["class","gantt-activity-line",3,"ngStyle","click",4,"ngFor","ngForOf"],["templatePopoverTask",""],[1,"gantt-activity-line",3,"ngStyle","click"],["bar",""],["mdePopoverOffsetX","-15","mdePopoverOffsetY","0",3,"mdePopoverTriggerFor","mdePopoverBackdropCloseOnClick","opened"],["popoverTrigger","mdePopoverTrigger"],["mdePopoverPlacement","bottom",3,"mdePopoverEnterDelay","mdePopoverLeaveDelay","mdePopoverPositionY","mdePopoverOverlapTrigger","mdePopoverDisableAnimation","mdeFocusTrapEnabled","mdePopoverArrowWidth","mdePopoverArrowColor"],["taskPopover","mdePopover"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"gantt-activity-content"],[1,"gantt-activity-link-control","gantt-activity-right",2,"height","26px","line-height","30px"],[1,"gantt-link-point"],[1,"gantt-activity-link-control","gantt-activity-left",2,"height","26px","line-height","30px"],["class","mat-elevation-z6","style","width: 320px; max-width: 320px;",3,"ngStyle",4,"ngIf"],[1,"mat-elevation-z6",2,"width","320px","max-width","320px",3,"ngStyle"],["mat-card-avatar","",2,"width","0","height","unset","margin-bottom",".7em","border-radius","0","border-style","solid",3,"ngStyle"],[2,"font-size","80%"],[2,"padding-left",".75em","padding-right","1em","font-stretch","condensed"],[4,"ngIf"],[3,"innerHTML"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,f,12,15,"div",1),t.ɵɵelementEnd(),t.ɵɵtemplate(2,x,1,1,"ng-template",null,2,t.ɵɵtemplateRefExtractor)),2&e&&(t.ɵɵproperty("ngStyle",t.ɵɵpureFunction2(2,b,n.containerHeight+"px",n.containerWidth+"px")),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.tasks))},directives:[n.NgStyle,n.NgForOf,i.MdePopoverTrigger,i.MdePopover,n.NgTemplateOutlet,n.NgIf,o.MatCard,o.MatCardHeader,o.MatCardAvatar,o.MatCardTitle,o.MatCardSubtitle,o.MatCardContent],pipes:[n.DatePipe],styles:[".gantt-activity-line[_ngcontent-%COMP%] {\n        \n        position: absolute;\n        box-sizing: border-box;\n        -webkit-user-select: none;\n    }\n    .gantt-activity-line[_ngcontent-%COMP%]:hover {\n        cursor: pointer;\n    }\n    .gantt-activity-content[_ngcontent-%COMP%] {\n        font-size: 12px;\n        color: #fff;\n        width: 100%;\n        top: 0;\n        position: absolute;\n        white-space: nowrap;\n        text-align: center;\n        line-height: inherit;\n        overflow: hidden;\n        height: 100%;\n    }\n    .gantt-activity-link-control[_ngcontent-%COMP%] {\n        position: absolute;\n        width: 13px;\n        top: 0;\n    }\n    .gantt-activity-right[_ngcontent-%COMP%] {\n        right: 0;\n    }\n    .gantt-activity-left[_ngcontent-%COMP%] {\n        left: 0;\n    }\n    .gantt-activity-right[_ngcontent-%COMP%]:hover {\n        \n    }\n    .gantt-activity-left[_ngcontent-%COMP%]:hover {\n        \n    }"]}),e}();function P(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",14),t.ɵɵelementStart(1,"label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var i=n.$implicit;t.ɵɵstyleProp("width",i.width+"px")("left",i.left+"px"),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",i.name," ")}}var M=function(e){return{width:e,"padding-left":0}},O=function(e,t,n){return{borderLeftColor:e,borderLeftWidth:t,borderLeftStyle:"solid",paddingRight:n}};function E(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",15,16),t.ɵɵelementStart(2,"mde-popover",17,18),t.ɵɵelementStart(4,"mat-card",19),t.ɵɵelementStart(5,"span",20),t.ɵɵtext(6),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",21),t.ɵɵelementStart(8,"div",22),t.ɵɵelement(9,"span",23),t.ɵɵelementStart(10,"span"),t.ɵɵtext(11),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var i=n.$implicit,o=t.ɵɵreference(3),r=t.ɵɵnextContext();t.ɵɵproperty("ngStyle",r.setGridRowStyle()),t.ɵɵadvance(2),t.ɵɵproperty("mdePopoverEnterDelay",100)("mdePopoverLeaveDelay",0)("mdePopoverPositionY","above")("mdePopoverOverlapTrigger",!1)("mdePopoverDisableAnimation",!1)("mdePopoverArrowWidth",8)("mdePopoverArrowColor","black"),t.ɵɵadvance(4),t.ɵɵtextInterpolate(i.name),t.ɵɵadvance(1),t.ɵɵproperty("mdePopoverTriggerFor",o)("mdePopoverBackdropCloseOnClick",!1)("ngStyle",t.ɵɵpureFunction1(14,M,r.gridColumns[1].width+"px")),t.ɵɵadvance(2),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction3(16,O,i.color.primary,"0.35em","0.5em")),t.ɵɵadvance(2),t.ɵɵtextInterpolate(i.name)}}var D=function(e){return{height:e}},W=function(e,t){return{height:e,width:t}},T=function(){function e(e,n){this.elem=e,this.ganttService=n,this.onGridRowClick=new t.EventEmitter,this.onPopoverOpen=new t.EventEmitter,this.scale={start:null,end:null},this.dimensions={height:0,width:0},this.gridColumns=[{name:"",left:0,width:16},{name:"Zadanie",left:0,width:330}]}return e.prototype.doWheel=function(e,t){return e.preventDefault(),e.stopPropagation(),e.wheelDelta?(e.wheelDelta||e.detail)>0?t.scrollLeft-=100:t.scrollLeft+=100:e.deltaY>0?t.scrollLeft+=100:t.scrollLeft-=100,!1},e.prototype.ngOnInit=function(){this.ganttService.TASK_CACHE=this.project.tasks,this.ganttService.TIME_SCALE=this.ganttService.calculateScale(this.options.scale.start,this.options.scale.end),this.start=this.options.scale.start,this.end=this.options.scale.end,this.containerWidth=this.calculateContainerWidth(),this.containerHeight=this.calculateContainerHeight(),this.activityContainerSizes=this.ganttService.calculateActivityContainerDimensions(),this.gridColumns=this.options.gridColumns?this.options.gridColumns:this.gridColumns,this.setScale(),this.setDimensions(),this.setSizes()},e.prototype.ngDoCheck=function(){this.ganttService.doTaskCheck(this.project.tasks,this.options.scale)},e.prototype.onVerticalScroll=function(e,t,n){this.ganttService.scrollTop(e,t,n)},e.prototype.gridRowClick=function(e){try{this.onGridRowClick.emit(e)}catch(e){}},e.prototype.popoverOpen=function(e){try{this.onPopoverOpen.emit(e)}catch(e){}},e.prototype.onResize=function(e){var t=this.ganttService.calculateActivityContainerDimensions();this.ganttActivityHeight=t.height+"px",this.ganttActivityWidth=t.width},e.prototype.setScale=function(){this.scale.start=this.start,this.scale.end=this.end},e.prototype.setDimensions=function(){this.dimensions.height=this.containerHeight,this.dimensions.width=this.containerWidth},e.prototype.setGridRowStyle=function(){return{height:this.ganttService.rowHeight+"px","line-height":this.ganttService.rowHeight+"px"}},e.prototype.setGridScaleStyle=function(){var e=this.ganttService.rowHeight+30;return{height:e+"px","line-height":e+"px"}},e.prototype.calculateColumnsWidth=function(){return"calc(100% - "+(this.gridColumns.map((function(e){return e.width})).reduce((function(e,t){return e+t}),0)+1)+"px)"},e.prototype.calculateContainerHeight=function(){return this.ganttService.TASK_CACHE.length*this.ganttService.rowHeight},e.prototype.calculateContainerWidth=function(){return this.ganttService.TIME_SCALE.length*this.ganttService.cellWidth+this.ganttService.cellWidth},e.prototype.setSizes=function(){this.ganttActivityHeight=this.activityContainerSizes.height+"px",this.ganttActivityWidth=this.activityContainerSizes.width},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(l))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["gantt-activity"]],inputs:{project:"project",options:"options"},outputs:{onGridRowClick:"onGridRowClick",onPopoverOpen:"onPopoverOpen"},decls:14,vars:23,consts:[[1,"grid"],["ganttGrid",""],[1,"grid-scale",3,"ngStyle"],["class","grid-head-cell",3,"width","left",4,"ngFor","ngForOf"],[1,"grid-data",3,"ngStyle"],["ganttGridData",""],["class","grid-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gantt-activity",3,"ngStyle","wheel","resize"],["ganttActivity",""],[3,"timeScaleMonth","timeScaleWeekend","dimensions","scale"],[1,"gantt-activity-area",3,"ngStyle"],["ganttActivityArea",""],[3,"timeScale","tasks"],[3,"timeScale","dimensions","tasks","onGridRowClick","onPopoverOpen"],[1,"grid-head-cell"],[1,"grid-row",3,"ngStyle"],["row",""],["mdePopoverPlacement","bottom",3,"mdePopoverEnterDelay","mdePopoverLeaveDelay","mdePopoverPositionY","mdePopoverOverlapTrigger","mdePopoverDisableAnimation","mdePopoverArrowWidth","mdePopoverArrowColor"],["appPopover","mdePopover"],[2,"max-width","340px","padding","3px 8px","color","#ffffff","text-align","center","background-color","#000000","border-radius","4px"],[2,"z-index","1070","display","block","font-family","'Lato','Helvetica Neue',Helvetica,Arial,sans-serif","font-style","normal","font-weight","normal","letter-spacing","normal","line-break","auto","line-height","1.42857143","text-align","left","text-align","start","text-decoration","none","text-shadow","none","text-transform","none","white-space","normal","word-break","normal","word-spacing","normal","word-wrap","normal","font-size","13px"],["mdePopoverOffsetX","25","mdePopoverOffsetY","0",1,"grid-cell",3,"mdePopoverTriggerFor","mdePopoverBackdropCloseOnClick","ngStyle"],[1,"gantt-tree-content"],[3,"ngStyle"]],template:function(e,n){if(1&e){var i=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",0,1),t.ɵɵelementStart(2,"div",2),t.ɵɵtemplate(3,P,3,5,"div",3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",4,5),t.ɵɵtemplate(6,E,12,20,"div",6),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",7,8),t.ɵɵlistener("wheel",(function(e){t.ɵɵrestoreView(i);var o=t.ɵɵreference(8);return n.doWheel(e,o)}))("resize",(function(e){return n.onResize(e)}),!1,t.ɵɵresolveWindow),t.ɵɵelement(9,"time-scale",9),t.ɵɵelementStart(10,"div",10,11),t.ɵɵelement(12,"activity-background",12),t.ɵɵelementStart(13,"activity-bars",13),t.ɵɵlistener("onGridRowClick",(function(e){return n.gridRowClick(e)}))("onPopoverOpen",(function(e){return n.popoverOpen(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngStyle",n.setGridScaleStyle()),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.gridColumns),t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(15,D,n.ganttService.calculateGanttHeight())),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.ganttService.TASK_CACHE),t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction2(17,W,n.ganttService.calculateGanttHeight()+60,n.calculateColumnsWidth())),t.ɵɵadvance(2),t.ɵɵproperty("timeScaleMonth",n.ganttService.MONTH_SCALE)("timeScaleWeekend",n.ganttService.TIME_SCALE)("dimensions",n.dimensions)("scale",n.options.scale),t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction2(20,W,n.ganttService.calculateGanttHeight(),n.containerWidth+36+"px")),t.ɵɵadvance(2),t.ɵɵproperty("timeScale",n.ganttService.TIME_SCALE)("tasks",n.ganttService.TASK_CACHE),t.ɵɵadvance(1),t.ɵɵproperty("timeScale",n.ganttService.TIME_SCALE)("dimensions",n.dimensions)("tasks",n.ganttService.TASK_CACHE))},directives:[n.NgStyle,n.NgForOf,d,h,k,i.MdePopover,o.MatCard,i.MdePopoverTrigger],styles:[".gantt-activity[_ngcontent-%COMP%] {\n            overflow-y: hidden;\n            overflow-x: scroll;\n            display: inline-block;\n            vertical-align: top;\n            position: relative;\n        }\n        .gantt-activity-area[_ngcontent-%COMP%] {\n            position: relative;\n            overflow-x: hidden;\n            overflow-y: hidden;\n            -webkit-user-select: none;\n        }\n        .gantt-vertical-scroll[_ngcontent-%COMP%] {\n            background-color: transparent;\n            overflow-x: hidden;\n            overflow-y: scroll;\n            position: absolute;\n            right: -10px;\n            display: block;\n            top: -1px;\n            border: 1px solid #cecece;\n        }\n        .grid[_ngcontent-%COMP%] {\n            overflow-x: hidden;\n            overflow-y: hidden;\n            display: inline-block;\n            vertical-align: top;\n            border-right: 1px solid #cecece;\n        }\n        .grid-scale[_ngcontent-%COMP%] {\n            color: #6b6b6b;\n            font-size: 12px;\n            border-bottom: 1px solid #e0e0e0;\n            background-color: whitesmoke;\n        }\n        .grid-head-cell[_ngcontent-%COMP%] {\n            \n            border-top: none !important;\n            border-right: none !important;\n            line-height: inherit;\n            box-sizing: border-box;\n            display: inline-block;\n            vertical-align: top;\n            border-right: 1px solid #cecece;\n            \n            position: relative;\n            cursor: default;\n            height: 100%;\n            -moz-user-select: -moz-none;\n            -webkit-user-select: none;\n            overflow: hidden;\n        }\n        .grid-data[_ngcontent-%COMP%] {\n            overflow: hidden;\n        }\n        .grid-row[_ngcontent-%COMP%] {\n            box-sizing: border-box;\n            border-bottom: 1px solid #e0e0e0;\n            background-color: #fff;\n            position: relative;\n            -webkit-user-select: none;\n        }\n        .grid-row[_ngcontent-%COMP%]:hover {\n            background-color: #eeeeee;\n            cursor: pointer;\n        }\n        .grid-cell[_ngcontent-%COMP%] {\n            border-right: none;\n            color: #454545;\n            display: inline-block;\n            vertical-align: top;\n            padding-left: 6px;\n            padding-right: 6px;\n            height: 100%;\n            overflow: hidden;\n            white-space: nowrap;\n            font-size: 13px;\n            box-sizing: border-box;\n        }\n        .actions-bar[_ngcontent-%COMP%] {\n            \n            border-bottom: 1px solid #e0e0e0;\n            clear: both;\n            \n            height: 28px;\n            background: whitesmoke;\n            color: #494949;\n            font-family: Arial, sans-serif;\n            font-size: 13px;\n            padding-left: 15px;\n            line-height: 25px;\n        }\n        .gantt-tree-content[_ngcontent-%COMP%] {\n            padding-left: 15px;\n        }"]}),e}(),H=function(){return{width:"100%"}},_=function(){function e(e){this.ganttService=e,this.onGridRowClick=new t.EventEmitter,this.onPopoverOpen=new t.EventEmitter}return Object.defineProperty(e.prototype,"project",{get:function(){return this._project},set:function(e){e?this._project=e:this.setDefaultProject()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){e.scale?this._options=e:this.setDefaultOptions()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.setSizes=function(){this.ganttContainerWidth=this.ganttService.calculateContainerWidth()},e.prototype.setDefaultOptions=function(){var e=this.ganttService.calculateGridScale(this._project.tasks);this._options={scale:e,gridColumns:[{name:"",left:0,width:16},{name:"Zadanie",left:0,width:330}]}},e.prototype.setDefaultProject=function(){this._project={name:"",startDate:null,tasks:[]}},e.prototype.gridRowClicked=function(e){this.onGridRowClick.emit(e)},e.prototype.popoverOpened=function(e){this.onPopoverOpen.emit(e)},e.prototype.onResize=function(e){this.setSizes()},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(l))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["gantt"]],inputs:{project:"project",options:"options"},outputs:{onGridRowClick:"onGridRowClick",onPopoverOpen:"onPopoverOpen"},features:[t.ɵɵProvidersFeature([])],decls:3,vars:4,consts:[[3,"ngStyle"],[1,"gantt-container",3,"resize"],[3,"project","options","onGridRowClick","onPopoverOpen"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵlistener("resize",(function(e){return n.onResize(e)}),!1,t.ɵɵresolveWindow),t.ɵɵelementStart(2,"gantt-activity",2),t.ɵɵlistener("onGridRowClick",(function(e){return n.gridRowClicked(e)}))("onPopoverOpen",(function(e){return n.popoverOpened(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("ngStyle",t.ɵɵpureFunction0(3,H)),t.ɵɵadvance(2),t.ɵɵproperty("project",n._project)("options",n._options))},directives:[n.NgStyle,T],styles:[".gantt-container[_ngcontent-%COMP%] {\n            font-family: Arial;\n            font-size: 13px;\n            border: 1px solid #cecece;\n            position: relative;\n            white-space: nowrap;\n            margin-top: 0px;\n        }"]}),e}(),A=function(){function e(){}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["gantt-header"]],inputs:{name:"name",startDate:"startDate"},decls:7,vars:5,consts:[[1,"gantt-header"],[1,"gantt-header-title"],[2,"flex","1"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div"),t.ɵɵtext(5),t.ɵɵpipe(6,"date"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate(n.name),t.ɵɵadvance(2),t.ɵɵtextInterpolate1("Started: ",t.ɵɵpipeBind2(6,2,n.startDate,"medium"),""))},pipes:[n.DatePipe],styles:[".gantt-header[_ngcontent-%COMP%] {\n            background-color: whitesmoke;\n            height: 40px;\n            border-bottom: 1px solid #e0e0e0;\n        }\n        .gantt-header-title[_ngcontent-%COMP%] {\n            padding: 12px;\n            display: flex;\n            flex-wrap:wrap;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 16px;\n        }\n        .gantt-header-actions[_ngcontent-%COMP%] {\n            display: inline;\n            float: right;\n            padding: 6px;\n        }"]}),e}(),F=function(){function e(){}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["gantt-footer"]],inputs:{project:"project"},decls:1,vars:0,consts:[[1,"gantt-footer"]],template:function(e,n){1&e&&t.ɵɵelement(0,"div",0)},styles:[".gantt-footer[_ngcontent-%COMP%] {\n            background-color: whitesmoke;\n            height: 36px;\n            border-top: 1px solid #e0e0e0;\n        }\n        .gantt-footer-actions[_ngcontent-%COMP%] {\n            float: right;\n        }"]}),e}(),L=function(){function e(){}return e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},providers:[],imports:[[n.CommonModule,o.MatCardModule,i.MdePopoverModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(L,{declarations:[T,d,h,k],imports:[n.CommonModule,o.MatCardModule,i.MdePopoverModule],exports:[T,d,h,k]});var I=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},providers:[l],imports:[[n.CommonModule,r.FormsModule,L]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(I,{declarations:[_,A,F],imports:[n.CommonModule,r.FormsModule,L],exports:[_]}),e.GanttComponent=_,e.GanttModule=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-gantt.umd.min.js.map