!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/forms"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("angular-gantt",["exports","@angular/forms","@angular/common","@angular/core"],e):e(t["angular-gantt"]={},t.ng.forms,t.ng.common,t.ng.core)}(this,function(t,e,n,i){"use strict";var o=(r.decorators=[{type:i.Injectable}],r);function r(){this.cellWidth=38,this.rowHeight=30,this.activityHeight=420,this.barHeight=25,this.barLineHeight=30,this.barMoveable=!1}var a=(s.prototype.calculateBarWidth=function(t,e){"string"==typeof t&&(t=new Date(t)),"string"==typeof e&&(e=new Date(e));var n=this.calculateDiffDays(t,e);return n/7*this.cellWidth+n/7},s.prototype.calculateBarLeft=function(t,e){var n=0;if(null!=t){"string"==typeof t&&(t=new Date);for(var i=0;i<e.length;i++)if(t.getTime()>=e[i].getTime()&&t.getTime()<e[i+1].getTime()){n=i*this.cellWidth+i+this.calculateBarLeftDelta(t)+7/(e[i+1].getDate()-t.getDate())/7*this.cellWidth-this.cellWidth/7;break}}return n},s.prototype.calculateGanttHeight=function(){return this.TASK_CACHE.length*this.rowHeight+"px"},s.prototype.calculateBarLeftDelta=function(t){var e=t.getHours()+t.getMinutes()/60+t.getSeconds()/3600;return this.cellWidth/24*e},s.prototype.calculateBar=function(t,e,n){var i=this.getBarStyle(t.status);return{top:this.barTop*e+2+"px",left:this.calculateBarLeft(t.start,n)+"px",height:this.barHeight+"px","line-height":this.barLineHeight+"px",width:this.calculateBarWidth(t.start,t.end)+"px","background-color":i["background-color"],border:i.border}},s.prototype.getBarStyle=function(t){void 0===t&&(t="");var e={};try{t=t.toLowerCase()}catch(n){t=""}return e["background-color"]="rgb(18,195, 244)",e.border="1px solid #2196F3",e},s.prototype.getBarProgressStyle=function(t){void 0===t&&(t="");var e={};try{t=t.toLowerCase()}catch(n){t=""}return e["background-color"]=this.barStyles[0].progressBackgroundColor,e},s.prototype.calculateBarProgress=function(t,e){return"number"!=typeof e?"0px":(100<e&&(e=100),t/100*e-2+"px")},s.prototype.calculateDiffDays=function(t,e){try{return Math.abs((t.getTime()-e.getTime())/864e5)}catch(n){return 0}},s.prototype.calculateScale=function(t,e){void 0===t&&(t=new Date),void 0===e&&(e=this.addDays(t,7));var n=[];try{for(;t.getTime()<=e.getTime();)n.push(t),t=this.addDays(t,7);return n}catch(i){return n}},s.prototype.isDayWeekend=function(t){var e=t.getDay();return 6===e||0===e},s.prototype.addDays=function(t,e){var n=new Date(t);return n.setDate(n.getDate()+e),n},s.prototype.removeDays=function(t,e){var n=new Date(t);return n.setDate(n.getDate()-e),n},s.prototype.calculateGridScale=function(t){var e=t.map(function(t){return{start:new Date(t.start),end:new Date(t.end)}});return{start:new Date(Math.min.apply(null,e.map(function(t){return t.start}))),end:new Date(Math.max.apply(null,e.map(function(t){return t.end})))}},s.prototype.getComputedStyle=function(t,e){return parseInt(document.defaultView.getComputedStyle(t)[e],10)},s.prototype.calculateContainerWidth=function(){return this.windowInnerWidth=window.innerWidth,this.gridWidth-18},s.prototype.calculateContainerHeight=function(){return innerHeight-18},s.prototype.calculateActivityContainerDimensions=function(){this.windowInnerWidth=window.innerWidth;var t=window.innerWidth-this.gridWidth-18;return window.innerHeight,this.gridHeight,{height:this.activityHeight,width:t}},s.prototype.calculateGanttActivityWidth=function(t,e){return t.offsetWidth-e.offsetWidth+"px"},s.prototype.calculateGanttActivityHeight=function(t){return t.offsetHeight+"px"},s.prototype.scrollTop=function(t,e,n){var i=t.scrollTop,o=this.setScrollTop;null!==i&&i!==undefined&&(o(i,n),o(n.scrollTop,e))},s.prototype.groupData=function(t){return t},s.prototype.doTaskCheck=function(t){return this.TASK_CACHE=t,!1},s.prototype.setIdPrefix=function(t){return"_"+t},s.prototype.setScrollTop=function(t,e){null!==e&&e!==undefined&&(e.scrollTop=t)},s.decorators=[{type:i.Injectable}],s.ctorParameters=function(){return[]},s);function s(){this.rowHeight=0,this.hourCellWidth=60,this.hoursCellWidth=25*this.hourCellWidth,this.cellWidth=0,this.windowInnerWidth=0,this.activityHeight=0,this.barHeight=0,this.barLineHeight=0,this.barTop=0,this.barMoveable=!1,this.gridWidth=542,this.gridHeight=332,this.barStyles=[{status:"information",backgroundColor:"rgb(18,195, 244)",border:"1px solid #2196F3",progressBackgroundColor:"#2196F3"},{status:"warning",backgroundColor:"#FFA726",border:"1px solid #EF6C00",progressBackgroundColor:"#EF6C00"},{status:"error",backgroundColor:"#EF5350",border:"1px solid #C62828",progressBackgroundColor:"#C62828"},{status:"completed",backgroundColor:"#66BB6A",border:"1px solid #2E7D32",progressBackgroundColor:"#2E7D32"}];var t=new o;this.rowHeight=t.rowHeight,this.cellWidth=t.cellWidth,this.activityHeight=t.activityHeight,this.barHeight=t.barHeight,this.barLineHeight=t.barLineHeight,this.barTop=t.rowHeight,this.barMoveable=t.barMoveable}var c=(Object.defineProperty(l.prototype,"project",{get:function(){return this._project},set:function(t){t?this._project=t:this.setDefaultProject()},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"options",{get:function(){return this._options},set:function(t){t.scale?this._options=t:this.setDefaultOptions()},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){},l.prototype.setSizes=function(){this.ganttContainerWidth=this.ganttService.calculateContainerWidth()},l.prototype.setDefaultOptions=function(){var t=this.ganttService.calculateGridScale(this._project.tasks);this._options={scale:t}},l.prototype.setDefaultProject=function(){this._project={id:"",name:"",startDate:null,tasks:[]}},l.prototype.gridRowClicked=function(t){this.onGridRowClick.emit(t)},l.prototype.onResize=function(t){this.setSizes()},l.decorators=[{type:i.Component,args:[{selector:"gantt",template:'\n        <div [ngStyle]="{ \'width\': \'100%\' }">\n            <div class="gantt-container" (window:resize)="onResize($event)">\n                \x3c!--<gantt-header [name]="_project.name" [startDate]="_project.startDate"></gantt-header>--\x3e\n                <gantt-activity [project]="_project" [options]="_options" (onGridRowClick)="gridRowClicked($event)"></gantt-activity>\n                \x3c!--<gantt-footer [project]="_project"></gantt-footer>--\x3e\n            </div>\n        </div>\n    ',providers:[],styles:["\n        .gantt-container {\n            font-family: Arial;\n            font-size: 13px;\n            border: 1px solid #cecece;\n            position: relative;\n            white-space: nowrap;\n            margin-top: 0px;\n        }\n    "]}]}],l.ctorParameters=function(){return[{type:a}]},l.propDecorators={project:[{type:i.Input}],options:[{type:i.Input}],onGridRowClick:[{type:i.Output}]},l);function l(t){this.ganttService=t,this.onGridRowClick=new i.EventEmitter}var d=(p.decorators=[{type:i.Component,args:[{selector:"gantt-header",template:'\n        <div class="gantt-header">\n            <div class="gantt-header-title">\n                <div style="flex:1">{{ name }}</div>\n                <div>Started: {{ startDate | date: \'medium\'}}</div>\n            </div>\n        </div>\n    ',styles:["\n        .gantt-header {\n            background-color: whitesmoke;\n            height: 40px;\n            border-bottom: 1px solid #e0e0e0;\n        }\n        .gantt-header-title {\n            padding: 12px;\n            display: flex;\n            flex-wrap:wrap;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 16px;\n        }\n        .gantt-header-actions {\n            display: inline;\n            float: right;\n            padding: 6px;\n        }\n    "]}]}],p.propDecorators={name:[{type:i.Input}],startDate:[{type:i.Input}]},p);function p(){}var h=(g.decorators=[{type:i.Component,args:[{selector:"gantt-footer",template:'<div class="gantt-footer"></div>',styles:["\n        .gantt-footer {\n            background-color: whitesmoke;\n            height: 36px;\n            border-top: 1px solid #e0e0e0;\n        }\n        .gantt-footer-actions {\n            float: right;\n        }\n    "]}]}],g.ctorParameters=function(){return[]},g.propDecorators={project:[{type:i.Input}]},g);function g(){}var u=(v.prototype.ngOnInit=function(){this.ganttService.TASK_CACHE=this.project.tasks,this.ganttService.TIME_SCALE=this.ganttService.calculateScale(this.options.scale.start,this.options.scale.end),this.start=this.options.scale.start,this.end=this.options.scale.end,this.containerWidth=this.calculateContainerWidth(),this.containerHeight=this.calculateContainerHeight(),this.activityContainerSizes=this.ganttService.calculateActivityContainerDimensions(),this.setScale(),this.setDimensions(),this.setSizes()},v.prototype.ngDoCheck=function(){this.ganttService.doTaskCheck(this.project.tasks)},v.prototype.onVerticalScroll=function(t,e,n){this.ganttService.scrollTop(t,e,n)},v.prototype.toggleChildren=function(t){try{this.onGridRowClick.emit(t)}catch(e){}},v.prototype.onResize=function(t){var e=this.ganttService.calculateActivityContainerDimensions();this.ganttActivityHeight=e.height+"px",this.ganttActivityWidth=e.width},v.prototype.setScale=function(){this.scale.start=this.start,this.scale.end=this.end},v.prototype.setDimensions=function(){this.dimensions.height=this.containerHeight,this.dimensions.width=this.containerWidth},v.prototype.setGridRowStyle=function(){return{height:this.ganttService.rowHeight+"px","line-height":this.ganttService.rowHeight+"px"}},v.prototype.setGridScaleStyle=function(){var t=this.ganttService.rowHeight+30;return{height:t+"px","line-height":t+"px"}},v.prototype.calculateContainerHeight=function(){return this.ganttService.TASK_CACHE.length*this.ganttService.rowHeight},v.prototype.calculateContainerWidth=function(){return this.ganttService.TIME_SCALE.length*this.ganttService.cellWidth+this.ganttService.cellWidth},v.prototype.setSizes=function(){this.ganttActivityHeight=this.activityContainerSizes.height+"px",this.ganttActivityWidth=this.activityContainerSizes.width},v.decorators=[{type:i.Component,args:[{selector:"gantt-activity",template:'\n    <div class="grid" #ganttGrid>\n        <div class="grid-scale" [ngStyle]="setGridScaleStyle()">\n            <div class="grid-head-cell"\n                *ngFor="let column of gridColumns" [style.width]="column.width + \'px\'"\n                [style.left]="column.left + \'px\'">\n\n                <label>\n                    {{column.name}}\n                </label>\n            </div>\n        </div>\n        <div class="grid-data"\n            #ganttGridData\n            [ngStyle]="{ \'height\': ganttService.calculateGanttHeight() }">\n\n            <div #row\n                *ngFor="let data of ganttService.TASK_CACHE" class="grid-row"\n                [ngStyle]="setGridRowStyle()">\n\n                <div class="grid-cell"\n                    [ngStyle]="{ \'width\': gridColumns[1].width + \'px\', \'padding-left\': 2 + \'px\' }">\n\n                    <div class="gantt-tree-content">{{data.name}}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="gantt-activity"\n        (window:resize)="onResize($event)"\n        [ngStyle]="{ \'height\': ganttService.calculateGanttHeight() + 60, \'width\': ganttActivityWidth + 36 + \'px\' }">\n\n        <time-scale [timeScale]="ganttService.TIME_SCALE"\n            [dimensions]="dimensions"></time-scale>\n        <div class="gantt-activity-area"\n            #ganttActivityArea\n            [ngStyle]="{ \'height\': ganttService.calculateGanttHeight(), \'width\': containerWidth + 36 + \'px\' }">\n\n            <activity-background [timeScale]="ganttService.TIME_SCALE"\n                [tasks]="ganttService.TASK_CACHE"></activity-background>\n            <activity-bars [timeScale]="ganttService.TIME_SCALE"\n                [dimensions]="dimensions"\n                [tasks]="ganttService.TASK_CACHE"\n                (onGridRowClick)="toggleChildren($event)"></activity-bars>\n        </div>\n    </div>\n    ',changeDetection:i.ChangeDetectionStrategy.Default,styles:["\n        .gantt-activity {\n            overflow-y: hidden;\n            overflow-x: scroll;\n            display: inline-block;\n            vertical-align: top;\n            position: relative;\n        }\n        .gantt-activity-area {\n            position: relative;\n            overflow-x: hidden;\n            overflow-y: hidden;\n            -webkit-user-select: none;\n        }\n        .gantt-vertical-scroll {\n            background-color: transparent;\n            overflow-x: hidden;\n            overflow-y: scroll;\n            position: absolute;\n            right: -10px;\n            display: block;\n            top: -1px;\n            border: 1px solid #cecece;\n        }\n        .grid {\n            overflow-x: hidden;\n            overflow-y: hidden;\n            display: inline-block;\n            vertical-align: top;\n            border-right: 1px solid #cecece;\n        }\n        .grid-scale {\n            color: #6b6b6b;\n            font-size: 12px;\n            border-bottom: 1px solid #e0e0e0;\n            background-color: whitesmoke;\n        }\n        .grid-head-cell {\n            /*color: #a6a6a6;*/\n            border-top: none !important;\n            border-right: none !important;\n            line-height: inherit;\n            box-sizing: border-box;\n            display: inline-block;\n            vertical-align: top;\n            border-right: 1px solid #cecece;\n            /*text-align: center;*/\n            position: relative;\n            cursor: default;\n            height: 100%;\n            -moz-user-select: -moz-none;\n            -webkit-user-select: none;\n            overflow: hidden;\n        }\n        .grid-data {\n            overflow:hidden;\n        }\n        .grid-row {\n            box-sizing: border-box;\n            border-bottom: 1px solid #e0e0e0;\n            background-color: #fff;\n            position: relative;\n            -webkit-user-select: none;\n        }\n        .grid-row:hover {\n            background-color: #eeeeee;\n            cursor: pointer;\n        }\n        .grid-cell {\n            border-right: none;\n            color: #454545;\n            display: inline-block;\n            vertical-align: top;\n            padding-left: 6px;\n            padding-right: 6px;\n            height: 100%;\n            overflow: hidden;\n            white-space: nowrap;\n            font-size: 13px;\n            box-sizing: border-box;\n        }\n        .actions-bar {\n            /*border-top: 1px solid #cecece;*/\n            border-bottom: 1px solid #e0e0e0;\n            clear: both;\n            /*margin-top: 90px;*/\n            height: 28px;\n            background: whitesmoke;\n            color: #494949;\n            font-family: Arial, sans-serif;\n            font-size: 13px;\n            padding-left: 15px;\n            line-height: 25px;\n        }\n        .gantt-tree-content {\n            padding-left: 15px;\n        }\n    "]}]}],v.ctorParameters=function(){return[{type:i.ElementRef},{type:a}]},v.propDecorators={project:[{type:i.Input}],options:[{type:i.Input}],onGridRowClick:[{type:i.Output}]},v);function v(t,e){this.elem=t,this.ganttService=e,this.onGridRowClick=new i.EventEmitter,this.upTriangle="&#x25b2;",this.downTriangle="&#x25bc;",this.activityActions={expanded:!1,expandedIcon:this.downTriangle},this.scale={start:null,end:null},this.dimensions={height:0,width:0},this.gridColumns=[{name:"",left:0,width:16},{name:"Grupa asortymentów",left:0,width:330}]}var y=(f.prototype.ngOnInit=function(){},f.prototype.setTimescaleStyle=function(){return{width:this.dimensions.width+36+"px"}},f.prototype.setTimescaleLineStyle=function(t){return{height:this.ganttService.rowHeight+"px","line-height":this.ganttService.rowHeight+"px",position:"relative","border-top":t}},f.prototype.setTimescaleCellStyle=function(){return{width:this.ganttService.cellWidth+"px"}},f.prototype.isDayWeekend=function(t){return this.ganttService.isDayWeekend(t)},f.decorators=[{type:i.Component,args:[{selector:"time-scale",template:'\n        <div class="time-scale" [ngStyle]="setTimescaleStyle()">\n            <div class="time-scale-line" [ngStyle]="setTimescaleLineStyle(\'none\')">\n                <div class="time-scale-cell" *ngFor="let date of timeScale; let i = index"\n                    [ngClass]="(i % 2) ? \'weekend\' : \'\'" [ngStyle]="setTimescaleCellStyle()">{{date | date: \'dd-MM\'}}</div>\n            </div>\n            <div class="time-scale-line" [ngStyle]="setTimescaleLineStyle(\'none\')">\n                <div class="time-scale-cell" *ngFor="let date of timeScale; let i = index"\n                [ngClass]="(i % 2) ? \'weekend\' : \'\'" [ngStyle]="setTimescaleCellStyle()">{{i + 1}}</div>\n            </div>\n        </div>',providers:[a],styles:["\n        .weekend {\n            background-color: whitesmoke;\n        }\n        .time-scale {\n            font-size: 12px;\n            background-color: #fff;\n            border-bottom: 1px solid #cecece;\n        }\n        .time-scale-line {\n            box-sizing: border-box;\n            border-bottom: 1px solid #cecece;\n        }\n        .time-scale-line:first-child {\n            border-top: none;\n        }\n        .time-scale-cell {\n            display: inline-block;\n            white-space: nowrap;\n            overflow: hidden;\n            border-right: 1px solid #cecece;\n            text-align: center;\n            height: 100%;\n        }"]}]}],f.ctorParameters=function(){return[{type:a}]},f.propDecorators={timeScale:[{type:i.Input}],dimensions:[{type:i.Input}]},f);function f(t){this.ganttService=t}var m=(b.prototype.ngOnInit=function(){this.drawGrid()},b.prototype.isDayWeekend=function(t){return this.ganttService.isDayWeekend(t)},b.prototype.setRowStyle=function(){return{height:this.ganttService.rowHeight+"px"}},b.prototype.setCellStyle=function(){return{width:this.ganttService.cellWidth+"px"}},b.prototype.drawGrid=function(){this.cells=this.timeScale},b.decorators=[{type:i.Component,args:[{selector:"activity-background",template:'\n    <div #bg class="gantt-activity-bg">\n        <div class="gantt-activity-row"\n            [ngStyle]="setRowStyle()"\n            *ngFor="let row of tasks">\n\n            <div class="gantt-activity-cell"\n                [ngStyle]="setCellStyle()"\n                *ngFor="let cell of cells; let i = index; let l = last" [ngClass]="(i % 2) ? \'weekend\' : \'\'" ></div>\n        </div>\n    </div>\n    ',styles:["\n        .weekend {\n            background-color: whitesmoke;\n        }\n        .gantt-activity-bg {\n            overflow: hidden;\n        }\n        .gantt-activity-row {\n            border-bottom: 1px solid #ebebeb;\n            background-color: #fff;\n            box-sizing: border-box;\n        }\n        .gantt-activity-cell {\n            display: inline-block;\n            height: 100%;\n            border-right: 1px solid #ebebeb;\n        }\n    "]}]}],b.ctorParameters=function(){return[{type:a}]},b.propDecorators={tasks:[{type:i.Input}],timeScale:[{type:i.Input}],bg:[{type:i.ViewChild,args:["bg"]}]},b);function b(t){this.ganttService=t,this.rows=[],this.cells=[]}var w=(x.prototype.ngOnInit=function(){this.containerHeight=this.dimensions.height,this.containerWidth=this.dimensions.width},x.prototype.drawBar=function(t,e){return this.ganttService.calculateBar(t,e,this.timeScale)},x.prototype.toggleChildren=function(t){try{this.onGridRowClick.emit(t)}catch(e){}},x.prototype.addMouseEventListeners=function(t){function e(){document.documentElement.removeEventListener("mousemove",t,!1),document.documentElement.removeEventListener("mouseup",e,!1),document.documentElement.removeEventListener("mouseleave",e,!1)}document.documentElement.addEventListener("mousemove",t,!1),document.documentElement.addEventListener("mouseup",e,!1),document.documentElement.addEventListener("mouseleave",e,!1)},x.decorators=[{type:i.Component,args:[{selector:"activity-bars",template:'\n    <div class="gantt-activity-bars-area"\n        [ngStyle]="{ \'height\': containerHeight + \'px\', \'width\': containerWidth + \'px\' }">\n\n        <div #bar class="gantt-activity-line"\n            *ngFor="let task of tasks; let i = index" (click)="toggleChildren(task)"\n            [ngStyle]="drawBar(task, i)">\n\n            <div class="gantt-activity-content"></div>\n            <div class="gantt-activity-link-control gantt-activity-right" style="height: 26px; line-height: 30px">\n                <div class="gantt-link-point"></div>\n            </div>\n            <div class="gantt-activity-link-control gantt-activity-left" style="height: 26px; line-height: 30px">\n                <div class="gantt-link-point"></div>\n            </div>\n        </div>\n    </div>\n    ',providers:[a],styles:['\n    .gantt-activity-line {\n        /*border-radius: 2px;*/\n        position: absolute;\n        box-sizing: border-box;\n        background-color: rgb(18,195,244);\n        border: 1px solid #2196F3;\n        -webkit-user-select: none;\n    }\n    .gantt-activity-line:hover {\n        cursor: pointer;\n    }\n    .gantt-activity-progress {\n        text-align: center;\n        z-index: 0;\n        background: #2196F3;\n        position: absolute;\n        min-height: 18px;\n        display: block;\n        height: 18px;\n    }\n    .gantt-activity-progress-drag {\n        height: 8px;\n        width: 8px;\n        bottom: -4px;\n        margin-left: 4px;\n        background-position: bottom;\n        background-image: "";\n        background-repeat: no-repeat;\n        z-index: 2;\n    }\n    .gantt-activity-content {\n        font-size: 12px;\n        color: #fff;\n        width: 100%;\n        top: 0;\n        position: absolute;\n        white-space: nowrap;\n        text-align: center;\n        line-height: inherit;\n        overflow: hidden;\n        height: 100%;\n    }\n    .gantt-activity-link-control {\n        position: absolute;\n        width: 13px;\n        top: 0;\n    }\n    .gantt-activity-right {\n        right: 0;\n    }\n    .gantt-activity-left {\n        left: 0;\n    }\n    .gantt-activity-right:hover {\n        /*cursor:w-resize;*/\n    }\n    .gantt-activity-left:hover {\n        /*cursor:w-resize;*/\n    }\n    ']}]}],x.ctorParameters=function(){return[{type:a}]},x.propDecorators={timeScale:[{type:i.Input}],dimensions:[{type:i.Input}],tasks:[{type:i.Input}],onGridRowClick:[{type:i.Output}]},x);function x(t){this.ganttService=t,this.onGridRowClick=new i.EventEmitter,this.containerHeight=0,this.containerWidth=0}var S=(k.decorators=[{type:i.NgModule,args:[{imports:[n.CommonModule],exports:[u,y,m,w],declarations:[u,y,m,w],providers:[]}]}],k);function k(){}var C=(D.decorators=[{type:i.NgModule,args:[{imports:[n.CommonModule,e.FormsModule,S],exports:[c],declarations:[c,d,h],providers:[a]}]}],D);function D(){}t.GanttModule=C,t.ɵe=m,t.ɵf=w,t.ɵb=u,t.ɵa=S,t.ɵd=y,t.ɵi=h,t.ɵg=c,t.ɵh=d,t.ɵc=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-gantt.umd.min.js.map